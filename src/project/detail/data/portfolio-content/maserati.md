## description

> 프로젝트 소개

- React와 Three.js를 활용해 직접 차량을 회전,확대,축소 하며 실제 차량 시승과 유사한 몰입감을 전달할 수 있는 **인터랙티브 자동차 쇼룸**

> 주요 기능

- 고디테일 GLB모델을 활용해 생생함 전달
- OrbitControl을 활용해 차량 외부부터 내부까지 자연스럽게 탐색 가능
- 스크롤 기반 카메라 이동을 통해 1인칭 시점의 경험 제공
- 차량 외부, 캘리퍼를 취향대로 커스텀 가능
- 가상의 큰 창문을 구현해 야경, 도심, 숲 속, 단풍길 등 다양한 배경 속 마세라티 연출

## skills

> React

- 차량 컬러, 옵션 변경 등 버튼 기반 커스텀 UI를 구현하는 데 있어 React의 컴포넌트 구조와 props 흐름이 가장 적합하다고 판단.
- 상태 기반으로 모달을 열고 닫거나, 선택된 옵션에 따라 UI를 변경하는 로직을
- 순수 JavaScript보다 React의 state와 hook을 활용하는 방식이 직관적.

> React Three Fiber

- 순수 Three.js 대신 React 환경에 최적화된 React Three Fiber를 선택
- React Three Fiber는 카메라, 조명, 씬 설정 등을 컴포넌트 단위로 추상화해 필요한 요소를 선언적으로
  조합하는 방식이 가능

> Tailwind CSS

- 다수의 페이지를 가지는 서비스가 아닌 단일 3D 쇼룸 중심의 UI 구조였기 때문에 Tailwind CSS만으로도 충분하다고 판단

## trouble

> 과도한 Props Drilling 문제

**문제**

- 차량 커스텀 사이드바의 컴포넌트가 나눠지면서
  최상위 컴포넌트에서 최하위 컴포넌트까지 Props가 깊게 전달됨.
  컴포넌트의 결합도 증가
- 최상위에서 전달하는 차량 모델 데이터를 여러 컴포넌트에 전달하다보니
  가독성 저하 및 추후 유지보수 어려움을 예상

**해결**

- props로 전달되던 state를 Context로 분리

**결과**

- 컴포넌트 책임 분리
- 가독성 및 유지보수 개선

> OrbitControls 기반 잦은 리렌더로 인한 성능 이슈

**문제**

- 3D 씬에서 OrbitControls 사용으로 부모 컴포넌트의 리렌더가 잦은 상태임을 인지.
- 3D 갤러리라는 프로젝트 성격 상 OrbitControls을 제거할 수 없어
  자식 컴포넌트의 불필요한 리렌더를 최대한 제한 할 필요성을 인지

**해결**

- UI 컴포넌트들을 React.memo로 감싸 부모 리렌더로 인한 불필요한 재실행 방지
- 이벤트 핸들러를 전달 할 경우 useCallback으로 참조 안정

**결과**

- 불필요한 리렌더 방지
- UX 안정성 향상
- 3D Scene 업데이트와 UI 렌더 분리

> glb 파일 로드 속도 저하 및 파일 mesh 손상

**문제**

- 초기 배포 후 glb 파일의 로드 속도가 약 5초 소요됨
- glb 원본 파일의 mesh (차량 재질)가 제거된 채로 로드됨

**개선 시도**

- glb의 용량 과다를 원인으로 판단,
  파일 압축 및 Blender 프로그램으로 폴리곤 삭제 시도
- 약 50%가량 용량을 줄였음에도 로딩 속도 개선 효과는 미미함
- 용량이 줄었음에도 속도 변화가 없다는 점에서
  렌더링 이전 단계(CPU 파싱 과정)에 병목이 있음을 인지

**해결**

- 기본 useGLTF Hook 대신 useLoader를 사용해 로더를 직접 커스터마이징
- DRACO / Meshopt 디코더를 명시적으로 적용하여 CPU 파싱 및 mesh 압축 해제 과정 최적화

**결과**

- 로드 속도 약 5초->3초로 단축
- 코드 개선으로 mesh압축 해제 정상화로 기존 차량 재질 복원

## retrospect

> 학습을 넘어, 실제 서비스 가능성을 고민

부트캠프에서 Three.js를 배웠지만,
단순 데모 수준의 구현은 실제 상업 서비스와 거리가 있다고 느꼈다.

**“이 기술을 실제 서비스 맥락에서 쓰려면 어떤 형태가 적절할까?”**

고민 끝에 자동차 전시장이라는 콘셉트를 떠올렸다.

실제 마세라티 공식 홈페이지를 참고하며 차량 소개 방식을 분석했고,

다수의 차량을 나열하는 구조 대신 신차 1~2종을 3D 쇼룸 형태로 집중적으로 보여주는 서비스에

React Three Fiber를 활용한다면 재미있는 퍼포먼스를 보여줄 수 있을거라고 생각했다.

> 가장 큰 난관 – 성능과 로딩 속도

가장 어려웠던 부분은 단연 성능이었다.

- 고퀄리티 GLB 파일은 대부분 용량이 크다.
- 로딩 속도가 지나치게 느리다.
- 모바일 환경에서는 더욱 치명적이다.

Draco 압축을 적용해도 충분하지 않았고,

결국 Blender를 사용해 불필요한 메쉬 제거와 폴리곤 수 감소 작업까지 시도했다.

파일 용량을 절반 이상 줄였음에도 로딩 속도 개선이 미미했던 순간,

“파일 용량만의 문제가 아닐 수 있다”는 의심을 하게 되었다.

이후 CPU 처리 단계와 로더 동작 방식을 점검했고,

useLoader를 커스터마이징하면서 로딩 과정을 최적화했다.

이 과정에서 깨졌던 mesh가 복구되는 예상치 못한 개선도 얻었다.

단순히 압축만 반복한 것이 아니라,

문제의 원인을 단계적으로 의심하고 추적하는 과정이라 의미있었다.

> 기술적 한계를 인정하고 UX로 보완하다

여러 최적화를 시도했지만,
일반적인 웹 서비스 수준의 빠른 로딩 속도를 확보하기는 어려웠다.

이 지점에서 깨달았다.

**모든 문제를 기술적으로 완벽히 해결할 수는 없다.**

그래서 선택한 대안은 UX 개선이었다.

정적인 로딩 화면 대신, 기대감을 형성하는 로딩 인터페이스를 설계했다.

더 이상 성능을 줄일 수 없는 상황에서

사용자 경험을 통해 체감 속도를 개선하는 방향으로 접근했다는 점은

이 프로젝트에서 얻은 중요한 판단 경험이었다.

> 아쉬움과 다음 단계

디자인을 충분히 다듬지 못한 점은 아쉬움으로 남는다.
또한 GLB 파일을 보다 능숙하게 다룰 수 있었다면 최적화 폭이 더 넓어졌을 것이라 생각한다.

다음에 다시 만든다면, 3D 자산 최적화 단계부터 전략적으로 접근하고

렌더링 성능 기준을 먼저 정의한 뒤 구현할 수 있을 것 같다.

디자인 완성도까지 함께 끌어올릴 수 있다면 정말 실제 진행하는 서비스처럼 구현 가능할 것 같다.
