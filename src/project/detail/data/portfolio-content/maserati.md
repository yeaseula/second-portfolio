## description

> 프로젝트 소개

- React와 Three.js를 활용해 직접 차량을 회전,확대,축소 하며 실제 차량 시승과 유사한 몰입감을 전달할 수 있는 **인터랙티브 자동차 쇼룸**

> 주요 기능

- 고디테일 GLB모델을 활용해 생생함 전달
- OrbitControl을 활용해 차량 외부부터 내부까지 자연스럽게 탐색 가능
- 스크롤 기반 카메라 이동을 통해 1인칭 시점의 경험 제공
- 차량 외부, 캘리퍼를 취향대로 커스텀 가능
- 가상의 큰 창문을 구현해 야경, 도심, 숲 속, 단풍길 등 다양한 배경 속 마세라티 연출

## skills

> React

- 차량 컬러, 옵션 변경 등 버튼 기반 커스텀 UI를 구현하는 데 있어 React의 컴포넌트 구조와 props 흐름이 가장 적합하다고 판단.
- 상태 기반으로 모달을 열고 닫거나, 선택된 옵션에 따라 UI를 변경하는 로직을
- 순수 JavaScript보다 React의 state와 hook을 활용하는 방식이 직관적.

> React Three Fiber

- 순수 Three.js 대신 React 환경에 최적화된 React Three Fiber를 선택
- React Three Fiber는 카메라, 조명, 씬 설정 등을 컴포넌트 단위로 추상화해 필요한 요소를 선언적으로
  조합하는 방식이 가능

> Tailwind CSS

- 다수의 페이지를 가지는 서비스가 아닌 단일 3D 쇼룸 중심의 UI 구조였기 때문에 Tailwind CSS만으로도 충분하다고 판단

## trouble

> 과도한 Props Drilling 문제

**문제**

- 차량 커스텀 사이드바의 컴포넌트가 나눠지면서
  최상위 컴포넌트에서 최하위 컴포넌트까지 Props가 깊게 전달됨.
  컴포넌트의 결합도 증가
- 최상위에서 전달하는 차량 모델 데이터를 여러 컴포넌트에 전달하다보니
  가독성 저하 및 추후 유지보수 어려움을 예상

**해결**

- props로 전달되던 state를 Context로 분리

**결과**

- 컴포넌트 책임 분리
- 가독성 및 유지보수 개선

> OrbitControls 기반 잦은 리렌더로 인한 성능 이슈

**문제**

- 3D 씬에서 OrbitControls 사용으로 부모 컴포넌트의 리렌더가 잦은 상태임을 인지.
- 3D 갤러리라는 프로젝트 성격 상 OrbitControls을 제거할 수 없어
  자식 컴포넌트의 불필요한 리렌더를 최대한 제한 할 필요성을 인지

**해결**

- UI 컴포넌트들을 React.memo로 감싸 부모 리렌더로 인한 불필요한 재실행 방지
- 이벤트 핸들러를 전달 할 경우 useCallback으로 참조 안정

**결과**

- 불필요한 리렌더 방지
- UX 안정성 향상
- 3D Scene 업데이트와 UI 렌더 분리

> glb 파일 로드 속도 저하 및 파일 mesh 손상

**문제**

- 초기 배포 후 glb 파일의 로드 속도가 약 5초 소요됨
- glb 원본 파일의 mesh (차량 재질)가 제거된 채로 로드됨

**개선 시도**

- glb의 용량 과다를 원인으로 판단,
  파일 압축 및 Blender 프로그램으로 폴리곤 삭제 시도
- 약 50%가량 용량을 줄였음에도 로딩 속도 개선 효과는 미미함
- 용량이 줄었음에도 속도 변화가 없다는 점에서
  렌더링 이전 단계(CPU 파싱 과정)에 병목이 있음을 인지

**해결**

- 기본 useGLTF Hook 대신 useLoader를 사용해 로더를 직접 커스터마이징
- DRACO / Meshopt 디코더를 명시적으로 적용하여 CPU 파싱 및 mesh 압축 해제 과정 최적화

**결과**

- 로드 속도 약 5초->3초로 단축
- 코드 개선으로 mesh압축 해제 정상화로 기존 차량 재질 복원

## retrospect

블라블라..
